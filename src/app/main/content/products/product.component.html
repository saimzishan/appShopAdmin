<div id="product" class="page-layout carded fullwidth" fusePerfectScrollbar>

    <!-- TOP BACKGROUND -->
    <div class="top-bg mat-accent-bg"></div>
    <!-- / TOP BACKGROUND -->

    <!-- CENTER -->
    <div class="center">

        <!-- HEADER -->
        <div class="header white-fg" fxLayout="row" fxLayoutAlign="space-between center">

            <!-- APP TITLE -->
            <div fxLayout="row" fxLayoutAlign="start center">

                <button class="mr-0 mr-sm-16" mat-icon-button [routerLink]="'/products'">
                    <mat-icon>arrow_back</mat-icon>
                </button>

                <!-- <div class="product-image mr-8 mr-sm-16" *fuseIfOnDom [@animate]="{value:'*',params:{delay:'50ms',scale:'0.2'}}">
                    <img *ngIf="product.images[0]" [src]="product.images[0].url">
                    <img *ngIf="!product.images[0]" [src]="'assets/images/ecommerce/product-image-placeholder.png'">
                </div> -->

                <div fxLayout="column" fxLayoutAlign="start start" *fuseIfOnDom [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
                    <div class="h2" *ngIf="pageType ==='edit'">
                        {{product.name}}
                    </div>
                    <div class="h2" *ngIf="pageType ==='new'">
                        New Product
                    </div>
                    <div class="subtitle secondary-text">
                        <span>Product Detail</span>
                    </div>
                </div>
            </div>
            <!-- / APP TITLE -->

            <button mat-raised-button class="save-product-button mat-white-bg mt-16 mt-sm-0" [disabled]="productForm.invalid" *ngIf="pageType ==='new'"
                (click)="addProduct()">
                <span>ADD</span>
            </button>
            <button mat-raised-button class="save-product-button mat-white-bg mt-16 mt-sm-0" *ngIf="pageType ==='edit'" (click)="deleteProduct()">
                <span>DELETE</span>
            </button>
            <button mat-raised-button class="save-product-button mat-white-bg mt-16 mt-sm-0" [disabled]="productForm.invalid || productForm.pristine"
                *ngIf="pageType ==='edit'" (click)="saveProduct()">
                <span>SAVE</span>
            </button>
        </div>
        <!-- / HEADER -->

        <!-- CONTENT CARD -->
        <div class="content-card mat-white-bg">

            <!-- CONTENT -->
            <div class="content">

                <form name="productForm" [formGroup]="productForm" class="product w-100-p" fxLayout="column" fxFlex>

                    <mat-tab-group>

                        <mat-tab label="Details">
                            <div class="tab-content p-24" fusePerfectScrollbar>

                                <mat-form-field class="w-100-p">
                                    <input matInput name="name" formControlName="name" placeholder="Product Name" required>
                                </mat-form-field>


                                <h3 class="mb-0">Categories</h3>
                                <div class="row" *ngFor="let c of category">

                                    <!-- <mat-icon *ngIf="c.children.length>0 && !viewChildren" (click)="enableChildren()" class="secondary-text s-15 mat-icon material-icons colorShow" role="img" aria-hidden="true">expand_more</mat-icon>
                                        <mat-icon *ngIf="c.children.length>0 && viewChildren" (click)="disableChildren()" class="secondary-text s-15 mat-icon material-icons colorHide" role="img" aria-hidden="true">expand_less</mat-icon>
                                    <mat-checkbox>
                                        <mat-icon style="margin-top: 6px" class="secondary-text s-25 mat-icon material-icons" role="img" aria-hidden="true">folder</mat-icon>
                                        {{c.name}} {{c.children.name}}
                                    </mat-checkbox>
                                    <ng-container *ngIf="viewChildren">
                                        <div class="row" *ngFor="let a of c.children">
                                            {{a.name}}
                                        </div>
                                    </ng-container> -->

                                    <ul style="list-style-type:none">
                                        <li>
                                            <mat-icon *ngIf="c.children.length>0 && !viewChildren" (click)="enableChildren()" class="secondary-text s-15 mat-icon material-icons colorShow"
                                                role="img" aria-hidden="true">expand_more</mat-icon>
                                            <mat-icon *ngIf="c.children.length>0 && viewChildren" (click)="disableChildren()" class="secondary-text s-15 mat-icon material-icons colorHide"
                                                role="img" aria-hidden="true">expand_less</mat-icon>
                                            <mat-checkbox>
                                                <mat-icon style="margin-top: 6px" class="secondary-text s-25 mat-icon material-icons" role="img" aria-hidden="true">folder</mat-icon>
                                                {{c.name}}
                                            </mat-checkbox>
                                        </li>
                                        <ul *ngIf="c.children.length>0 && viewChildren" style="list-style-type:none">
                                            <ng-container *ngFor="let a of c.children">
                                                <li>
                                                    <mat-checkbox>
                                                        {{a.name}}
                                                    </mat-checkbox>
                                                </li>
                                            </ng-container>
                                        </ul>
                                    </ul>

                                </div>
                                <!-- <div class="row">
                                    <mat-checkbox>
                                        <mat-icon style="font-size: 5px" class="secondary-text s-48 mat-icon material-icons" role="img" aria-hidden="true">folder</mat-icon>
                                    </mat-checkbox>

                                </div> -->

                                <!-- <tree-root [nodes]="category" [options]="children"></tree-root> -->
                                <!-- <tree-root *ngFor="let c of category">
                                    {{c.name}}
                                </tree-root> -->

                                <!--<mat-form-field class="w-100-p" floatPlaceholder="never">
                                    <mat-chip-list matPrefix #categoryList
                                                   name="categories"
                                                   formControlName="categories">

                                        <mat-chip *ngFor="let category of product.categories"
                                                  removable="true" (removed)="product.removeCategory(category)">
                                            {{category}}
                                            <mat-icon matChipRemove>cancel</mat-icon>
                                        </mat-chip>
                                    </mat-chip-list>
                                    <input matInput
                                           matChipInputAddOnBlur="true"
                                           (matChipInputTokenEnd)="product.addCategory($event)"
                                           placeholder="Add category..."
                                           [matChipInputFor]="categoryList"/>
                                </mat-form-field>-->

                                <!--<h3 class="mb-0">Tags</h3>
                                <mat-form-field class="w-100-p" floatPlaceholder="never">
                                    <mat-chip-list matPrefix #tagList
                                                   name="tags"
                                                   formControlName="tags">

                                        <mat-chip *ngFor="let tag of product.tags"
                                                  removable="true" (removed)="product.removeTag(tag)">
                                            {{tag}}
                                            <mat-icon matChipRemove>cancel</mat-icon>
                                        </mat-chip>
                                    </mat-chip-list>
                                    <input matInput
                                           matChipInputAddOnBlur="true"
                                           (matChipInputTokenEnd)="product.addTag($event)"
                                           placeholder="Add tag..."
                                           [matChipInputFor]="tagList"/>
                                </mat-form-field>-->
                                <!--<mat-form-field class="w-100-p">
                                <mat-select placeholder="Product Type">
                                  <mat-option value="physical">
                                    Physical Product
                                  </mat-option>
                                  <mat-option value="downloadable">
                                    Downloadable Product
                                  </mat-option>
                                </mat-select>
                              </mat-form-field>-->

                                <mat-form-field class="w-100-p">
                                    <mat-select placeholder="Select Brand" name="brand_id" formControlName="brand_id" required>
                                        <mat-option *ngFor="let brand of brands" [value]="brand.id">
                                            {{brand.name}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field class="w-100-p">
                                    <mat-select placeholder="Select Taxes" name="tax_id" formControlName="tax_id" required>
                                        <mat-option *ngFor="let brand of brands" [value]="brand.id">
                                            {{brand.name}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>
                                <mat-form-field class="w-100-p">
                                    <textarea required matInput name="short_description" rows="3" formControlName="short_description" placeholder="Product Short Description">
                                     </textarea>
                                </mat-form-field>
                                <mat-form-field class="w-100-p">
                                    <textarea matInput name="long_description" rows="5" formControlName="long_description" placeholder="Product Long Description">
                                     </textarea>
                                </mat-form-field>
                            </div>
                        </mat-tab>

                        <!-- <mat-tab label="Product Images">

                            <div class="tab-content p-24" fusePerfectScrollbar>
                                <div fxLayout="row" fxLayoutAlign="start start" fxLayoutWrap>
                                    <file-drop headertext="Drop files here" (onFileDrop)="dropped($event)" (onFileOver)="fileOver($event)" (onFileLeave)="fileLeave($event)"
                                        style="width: 100%;"> -->
                        <!--<span>optional content (don't set headertext then)</span>-->
                        <!-- </file-drop>
                                    <div class="upload-table">
                                        <table class="table">
                                            <thead>
                                                <tr> -->
                        <!-- <th>Name</th> -->
                        <!-- </tr>
                                            </thead>
                                            <tbody class="upload-name-style">
                                                <tr *ngFor="let item of files; let i=index">
                                                    <td>
                                                        <strong>{{ item.relativePath }}</strong>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div> -->

                        <!--<div class="tab-content p-24" fusePerfectScrollbar>
                                <div fxLayout="row" fxLayoutAlign="start start" fxLayoutWrap>

                                    <div *ngIf="product.images.length === 0"
                                         class="product-image" fxlayout="row" fxLayoutAlign="center center">
                                        <img class="media" [src]="'assets/images/ecommerce/product-image-placeholder.png'">
                                    </div>

                                    <div *ngFor="let image of product.images">
                                        <div *ngIf="product.images.length > 0"
                                             class="product-image" fxlayout="row" fxLayoutAlign="center center">
                                            <img class="media" [src]="image.url">
                                        </div>
                                    </div>
                                </div>
                            </div>-->
                        <!-- </mat-tab> -->

                        <mat-tab label="Supplier">
                            <div class="tab-content p-24" fusePerfectScrollbar>
                                <mat-form-field class="w-100-p">
                                    <mat-select placeholder="Select Supplier" name="supplier_id" formControlName="supplier_id" required>
                                        <mat-option *ngFor="let supplier of suppliers" [value]="supplier.id">
                                            {{supplier.name}}
                                        </mat-option>
                                    </mat-select>
                                </mat-form-field>

                                <mat-form-field class="w-100-p">
                                    <input matInput name="price" formControlName="price" placeholder="Product Price" required>
                                </mat-form-field>
                                <mat-form-field class="w-100-p">
                                    <input matInput name="sku" formControlName="sku" placeholder="Product Code/SKU" required>
                                </mat-form-field>
                                <mat-form-field class="w-100-p">
                                    <input matInput name="upc" formControlName="upc" placeholder="Upc" required>
                                </mat-form-field>
                                <mat-form-field class="w-100-p">
                                    <input matInput name="ean" formControlName="ean" placeholder="Ean" required>
                                </mat-form-field>
                                <mat-form-field class="w-100-p">
                                    <input matInput name="width" formControlName="width" placeholder="Width (Centimeters)" required>
                                </mat-form-field>
                                <mat-form-field class="w-100-p">
                                    <input matInput name="height" formControlName="height" placeholder="Height (Centimeters)" required>
                                </mat-form-field>
                                <mat-form-field class="w-100-p">
                                    <input matInput name="depth" formControlName="depth" placeholder="Depth (Centimeters)" required>
                                </mat-form-field>

                                <!-- <div class="tab-content p-24" fusePerfectScrollbar> -->
                                <div fxLayout="row" fxLayoutAlign="start start" fxLayoutWrap>
                                    <file-drop headertext="Drop files here" (onFileDrop)="dropped($event)" (onFileOver)="fileOver($event)" (onFileLeave)="fileLeave($event)"
                                        style="width: 100%;" required>
                                        <!--<span>optional content (don't set headertext then)</span>-->
                                    </file-drop>
                                    <div class="upload-table">
                                        <table class="table">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                </tr>
                                            </thead>
                                            <tbody class="upload-name-style">
                                                <tr *ngFor="let item of files; let i=index">
                                                    <td>
                                                        <strong>{{ item.relativePath }}</strong>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <!-- </div> -->

                            </div>
                        </mat-tab>

                        <mat-tab label="Options & SKUs">
                            <div class="tab-content p-24" fusePerfectScrollbar>
                                <div class="row">
                                    <!-- <mat-tab-group>
                                        <mat-tab label="Option Set">
                                            <div class="tab-content p-24" fusePerfectScrollbar>
                                                <mat-form-field class="w-100-p">
                                                    <mat-select placeholder="Option Set" name="supplier_id" formControlName="supplier_id" required>
                                                        <mat-option *ngFor="let optionSet of optionSets" [value]="optionSet.id">
                                                            {{optionSet.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>
                                            </div>
                                        </mat-tab>
                                        <mat-tab label="Create new Option Set"></mat-tab>
                                    </mat-tab-group> -->


                                    <div class="col-md-2">
                                        <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                                            <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home"
                                                aria-selected="true">Options</a>
                                            <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile"
                                                aria-selected="false">SKUs</a>
                                            <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages"
                                                aria-selected="false">Rules</a>

                                        </div>
                                    </div>
                                    <div class="col-md-10">

                                        <div class="tab-content" id="v-pills-tabContent">
                                            <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                                                <label style="border-bottom: 2px solid;
                                                border-bottom-style: dashed;">Option Set</label>
                                                <br>
                                                <mat-form-field class="w-60-p">
                                                    <mat-select placeholder="Option Set" name="supplier_id" formControlName="supplier_id" (change)="checkMyOptions($event.value)"
                                                        required>
                                                        <mat-option value="-1">--None--</mat-option>
                                                        <mat-option *ngFor="let optionSet of optionSets" [value]="optionSet.id">
                                                            {{optionSet.name}}
                                                        </mat-option>
                                                    </mat-select>
                                                </mat-form-field>

                                                <mat-form-field class="w-30-p">
                                                    <input matInput name="height" formControlName="height" hidden>
                                                    <a href="">Create new Option SetSelect option set</a>
                                                </mat-form-field>
                                                <br>
                                                <label style="border-bottom: 2px solid;
                                                border-bottom-style: dashed;">Options</label>
                                                <div class="fuse-card" style="min-width: 65% !important; padding: 10px;">
                                                    <table class="table table-bordered">
                                                        <!-- Name Column -->
                                                        <thead>
                                                            <tr>
                                                                <th scope="col">Option name</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr *ngFor="let row of dataSource">
                                                                <td>
                                                                    {{row.value}}
                                                                </td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                    <br>

                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos.
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos.
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos.Lorem
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                            </div>
                                            <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos.
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos.
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos.Lorem
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                            </div>
                                            <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos.
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos.
                                                Lorem ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos.Lorem
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                                ipsum dolor sit amet consectetur adipisicing elit. Quisquam, dignissimos
                                            </div>
                                        </div>
                                    </div>
                                </div>



                            </div>
                        </mat-tab>

                        <mat-tab label="Custom Fields">
                            <div class="tab-content p-24" fusePerfectScrollbar>

                                <div class="py-16" fxLayout="row">
                                    <mat-form-field fxFlex>
                                        <input matInput name="width" formControlName="width" placeholder="Custom Field #1 Name">
                                    </mat-form-field>
                                    <mat-form-field fxFlex>
                                        <input matInput name="Height" formControlName="height" placeholder="Custom Field #1 value">
                                    </mat-form-field>

                                </div>

                            </div>
                        </mat-tab>

                        <mat-tab label="Other Details">
                            <div class="tab-content p-24" fusePerfectScrollbar fxLayout="column">
                                <div>
                                    <legend>
                                        <h2>Product Identifiers</h2>
                                    </legend>
                                    <div class="fuse-card" style="min-width: 100% !important; padding: 50px;">
                                        <div class="py-16" fxLayout="row">
                                            <mat-form-field fxFlex class="w-50-p">
                                                <input matInput name="width" formControlName="width" placeholder="Global Trade Item Number">
                                            </mat-form-field>
                                            <mat-form-field fxFlex class="w-50-p">
                                                <input matInput name="Height" formControlName="height" placeholder="Manufacturer Part Number">
                                            </mat-form-field>
                                        </div>

                                        <mat-form-field class="w-100-p">
                                            <input matInput name="Depth" formControlName="depth" placeholder="Brand Name">
                                        </mat-form-field>
                                        <mat-form-field class="w-100-p">
                                            <input matInput name="weight" formControlName="weight" placeholder="Product UPC/EAN">
                                        </mat-form-field>

                                    </div>

                                </div>
                                <div>
                                    <legend>
                                        <h2>Related Products</h2>
                                    </legend>
                                    <div class="fuse-card" style="min-width: 100% !important; padding: 50px;">
                                        Related Products
                                        <mat-checkbox formControlName="Weight"></mat-checkbox>
                                        Find and show related products automatically
                                    </div>


                                </div>
                                <div>

                                    <legend>
                                        <h2>Other Details</h2>
                                    </legend>
                                    <div class="fuse-card" style="min-width: 100% !important; padding: 50px;">
                                        <div class="py-16" fxLayout="row">
                                            <mat-form-field fxFlex class="w-50-p">
                                                <input matInput name="Width" formControlName="width" placeholder="Bin Picking Number">
                                            </mat-form-field>
                                            <mat-form-field fxFlex class="w-50-p">
                                                <textarea matInput name="Height" formControlName="height" placeholder="Warranty Information"></textarea>
                                            </mat-form-field>
                                        </div>
                                        <br>
                                        <mat-form-field class="w-100-p">
                                            <mat-select name="Width" placeholder="Select" formControlName="brand_id">
                                                <mat-option value="option" selected>Default</mat-option>
                                            </mat-select>
                                        </mat-form-field>
                                        <mat-form-field class="w-100-p">
                                            <input matInput name="Weight" formControlName="weight" placeholder="Search Keywords">
                                        </mat-form-field>
                                        <mat-form-field class="w-100-p">
                                            <input matInput name="Weight" formControlName="weight" placeholder="Availability">
                                        </mat-form-field>
                                        Visible
                                        <mat-checkbox name="Width" formControlName="weight"></mat-checkbox>
                                        Yes, this product should be visible on my web site
                                        <br>
                                        <br> Featured Product
                                        <mat-checkbox name="Width" formControlName="weight"></mat-checkbox>
                                        Yes, this is a featured product

                                    </div>

                                </div>

                            </div>
                        </mat-tab>
                    </mat-tab-group>
                </form>

            </div>
            <!-- / CONTENT -->

        </div>
        <!-- / CONTENT CARD -->

    </div>
    <!-- / CENTER -->
</div>